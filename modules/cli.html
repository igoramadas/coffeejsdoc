<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>CroJSDoc - cli</title><script>if (location.protocol.match(/^http/) && location.pathname.match('\.html') === null && location.pathname.slice(-1) !== '/') {
  location.href = location.href + '/';
}</script><link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet" type="text/css"><link href="../google-code-prettify/prettify.css" rel="stylesheet" type="text/css"><link href="../style.css" rel="stylesheet" type="text/css"></head><body data-spy="scroll" data-target=".sidebar"><nav role="navigation" class="navbar navbar-default navbar-fixed-top"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#top-navigation-collapse" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="top-navigation-collapse" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="../index.html">Home</a></li><li class="dropdown"><a data-toggle="dropdown" href="#" class="dropdown-toggle">Guides <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="../guides/ListOfTags.html">List of tags</a></li><li><a href="../guides/SetupGithubPages.html">Setup github pages</a></li><li><a href="../guides/SpecifyingReturns.html">Specifying returns</a></li><li><a href="../guides/SpecifyingTypes.html">Specifying types</a></li></ul></li><li class="active"><a href="../modules/index.html">Modules - cli</a></li><li><a href="../classes/index.html">Classes</a></li><li class="dropdown"><a data-toggle="dropdown" href="#" class="dropdown-toggle">Files <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="../files/cli.coffee.html">cli.coffee</a></li><li><a href="../files/collect.coffee.html">collect.coffee</a></li><li><a href="../files/example.coffee.html">example.coffee</a></li><li><a href="../files/example.js.html">example.js</a></li><li><a href="../files/render.coffee.html">render.coffee</a></li><li><a href="../files/struct.coffee.html">struct.coffee</a></li><li><a href="../files/dox.dox.coffee.html">dox/dox.coffee</a></li><li><a href="../files/dox.dox_coffee.coffee.html">dox/dox_coffee.coffee</a></li><li><a href="../files/dox.index.coffee.html">dox/index.coffee</a></li><li><a href="../files/dox.utils.coffee.html">dox/utils.coffee</a></li></ul></li></ul><div class="options"><label class="checkbox"><input id="options-private" type="checkbox"> Private </label></div></div></div></nav><div class="container-fluid content"><div class="row"><div data-spy="affix" class="hidden-xs sidebar col-sm-3"><div class="cormo-sidenav"><div class="panel panel-default"><div id="undefined_body" class="panel-collapse collapse in"><ul class="nav nav-pills nav-stacked"><li class="active"><a href="#cli">cli</a></li><li class="cormo-class-property private"><a href="#cli__buildOptions">_buildOptions<span class="pull-right label label-private">private</span></a></li><li class="cormo-class-property private"><a href="#cli__parseArguments">_parseArguments<span class="pull-right label label-private">private</span></a></li><li class="cormo-class-property private"><a href="#cli__readConfig">_readConfig<span class="pull-right label label-private">private</span></a></li><li class="cormo-class-property private"><a href="#cli__readExternalTypes">_readExternalTypes<span class="pull-right label label-private">private</span></a></li><li class="cormo-class-property private"><a href="#cli__readSourceFiles">_readSourceFiles<span class="pull-right label label-private">private</span></a></li><li class="cormo-class-property"><a href="#cli_run">run</a></li><li><a href="../modules/collect.html">collect</a></li><li><a href="../modules/render.html">render</a></li></ul></div></div></div></div><div class="col-sm-9 col-sm-offset-3"><span id="cli" class="fix-anchor"></span><section><h1 class="class_title">cli</h1><div>(defined in <a href="https://github.com/croquiscom/crojsdoc/blob/master//src/cli.coffee">/src/cli.coffee</a>)</div><div><p>Provides CroJSDoc command line interface</p>
</div><div></div></section><span id="cli__buildOptions" class="fix-anchor"></span><section class="private"><div class="panel panel-success"><div data-toggle="collapse" data-target="#cli__buildOptions_body" class="panel-heading collapsed"><h3 class="panel-title">_buildOptions()<span class="label label-private">private</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Builds options from a config file(crojsdoc.yaml) or command line arguments</p>
</div></div><div id="cli__buildOptions_body" class="panel-collapse collapse"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>(Returns)</td><td><span><a href='../classes/struct.Options.html#struct_Options'>Options</a></span></td><td><span></span></td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/crojsdoc/blob/master//src/cli.coffee#L94">/src/cli.coffee:94</a>)</span></div><pre class="sourcecode prettyprint .linenums:94">_buildOptions = -&gt;
  options =
    _project_dir: process.cwd()
    types:
      # Links for pre-known types
      Object: 'https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object'
      Boolean: 'https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Boolean'
      String: 'https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'
      Array: 'https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array'
      Number: 'https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number'
      Date: 'https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date'
      Function: 'https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function'
      RegExp: 'https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp'
      Error: 'https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Error'
      undefined: 'https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/undefined'
    _sources: []

  _readConfig options
  _parseArguments options
  _readExternalTypes options['external-types'], options.types

  options.output_dir = resolve options._project_dir, options.output or 'doc'

  return options</pre></div></div></div></section><span id="cli__parseArguments" class="fix-anchor"></span><section class="private"><div class="panel panel-success"><div data-toggle="collapse" data-target="#cli__parseArguments_body" class="panel-heading collapsed"><h3 class="panel-title">_parseArguments(options)<span class="label label-private">private</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Parses the command line arguments to build options</p>
</div></div><div id="cli__parseArguments_body" class="panel-collapse collapse"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>options</code></td><td><span><a href='../classes/struct.Options.html#struct_Options'>Options</a></span></td><td><span> </span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/crojsdoc/blob/master//src/cli.coffee#L49">/src/cli.coffee:49</a>)</span></div><pre class="sourcecode prettyprint .linenums:49">_parseArguments = (options) -&gt;
  {OptionParser} = require 'optparse'
  switches = [
    [ '-o', '--output DIRECTORY', 'Output directory' ]
    [ '-t', '--title TITLE', 'Document Title' ]
    [ '-q', '--quite', 'less output' ]
    [ '-r', '--readme DIRECTORY', 'README.md directory path']
    [ '-f', '--files', 'included source files' ]
    [ '--external-types JSONFILE', 'external type definitions' ]
  ]
  parser = new OptionParser switches
  parser.on '*', (opt, value) -&gt;
    if value is undefined
      value = true
    options[opt] = value
  [].push.apply options._sources, parser.parse process.argv.slice 2</pre></div></div></div></section><span id="cli__readConfig" class="fix-anchor"></span><section class="private"><div class="panel panel-success"><div data-toggle="collapse" data-target="#cli__readConfig_body" class="panel-heading collapsed"><h3 class="panel-title">_readConfig(options)<span class="label label-private">private</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Reads a config file(crojsdoc.yaml) to build options</p>
</div></div><div id="cli__readConfig_body" class="panel-collapse collapse"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>options</code></td><td><span><a href='../classes/struct.Options.html#struct_Options'>Options</a></span></td><td><span> </span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/crojsdoc/blob/master//src/cli.coffee#L15">/src/cli.coffee:15</a>)</span></div><pre class="sourcecode prettyprint .linenums:15">_readConfig = (options) -&gt;
  {safeLoad} = require 'js-yaml'
  try
    config = safeLoad fs.readFileSync(join(process.cwd(), 'crojsdoc.yaml'), 'utf-8')
    if config.hasOwnProperty 'output'
      options.output = config.output
    if config.hasOwnProperty 'title'
      options.title = config.title
    if config.hasOwnProperty 'quite'
      options.quite = config.quite is true
    if  config.hasOwnProperty 'files'
      options.files = config.files is true
    if config.hasOwnProperty('readme') and typeof config.readme is 'string'
      options._readme = config.readme
    if config.hasOwnProperty 'external-types'
      options['external-types'] = config['external-types']
    if config.hasOwnProperty 'sources'
      if Array.isArray config.sources
        [].push.apply options._sources, config.sources
      else
        options._sources.push config.sources
    if config.hasOwnProperty 'github'
      options.github = config.github
      if options.github.branch is undefined
        options.github.branch = 'master'
    if config.hasOwnProperty 'reverse_see_also'
      options.reverse_see_also = config.reverse_see_also is true
    return</pre></div></div></div></section><span id="cli__readExternalTypes" class="fix-anchor"></span><section class="private"><div class="panel panel-success"><div data-toggle="collapse" data-target="#cli__readExternalTypes_body" class="panel-heading collapsed"><h3 class="panel-title">_readExternalTypes(external_types, types)<span class="label label-private">private</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Reads additional type definitions from a file or a object</p>
</div></div><div id="cli__readExternalTypes_body" class="panel-collapse collapse"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>external_types</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a>, <a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object'>Object</a></span></td><td><span> </span></td></tr><tr><td><span class="method-depth0"></span><code>types</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object'>Object</a></span></td><td><span> </span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/crojsdoc/blob/master//src/cli.coffee#L72">/src/cli.coffee:72</a>)</span></div><pre class="sourcecode prettyprint .linenums:72">_readExternalTypes = (external_types, types) -&gt;
  return if not external_types

  if typeof external_types is 'string'
    try
      content = fs.readFileSync(external_types, 'utf-8').trim()
      try
        external_types = JSON.parse content
      catch e
        console.log &quot;external-types: Invalid JSON file&quot;
    catch e
      console.log &quot;external-types: Cannot open #{external_types}&quot;

  if typeof external_types is 'object'
    for type, url of external_types
      types[type] = url</pre></div></div></div></section><span id="cli__readSourceFiles" class="fix-anchor"></span><section class="private"><div class="panel panel-success"><div data-toggle="collapse" data-target="#cli__readSourceFiles_body" class="panel-heading collapsed"><h3 class="panel-title">_readSourceFiles(options)<span class="label label-private">private</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Reads source files</p>
</div></div><div id="cli__readSourceFiles_body" class="panel-collapse collapse"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>options</code></td><td><span><a href='../classes/struct.Options.html#struct_Options'>Options</a></span></td><td><span> </span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>(Returns)</td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array'>Array</a>&lt;<a href='../classes/struct.Content.html#struct_Content'>Content</a>&gt;</span></td><td><span></span></td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/crojsdoc/blob/master//src/cli.coffee#L125">/src/cli.coffee:125</a>)</span></div><pre class="sourcecode prettyprint .linenums:125">_readSourceFiles = (options) -&gt;
  project_dir_re = new RegExp(&quot;^&quot; + options._project_dir)
  contents = []
  for path in options._sources
    base_path = path = resolve options._project_dir, path
    base_path = dirname base_path while /[*?]/.test basename(base_path)
    glob.sync(path).forEach (path) =&gt;
      if fs.statSync(path).isDirectory()
        list = walkdir.sync path
      else
        list = [path]
      for file in list
        continue if fs.statSync(file).isDirectory()
        data = fs.readFileSync(file, 'utf-8').trim()
        continue if not data
        contents.push path: file.replace(project_dir_re, ''), file: file.substr(path.length+1), data: data
  try
    data = fs.readFileSync &quot;#{options._readme or options._project_dir}/README.md&quot;, 'utf-8'
    contents.push path: '', file: 'README', data: data
  return contents</pre></div></div></div></section><span id="cli_run" class="fix-anchor"></span><section><div class="panel panel-success"><div data-toggle="collapse" data-target="#cli_run_body" class="panel-heading collapsed"><h3 class="panel-title">run()<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Runs CroJSDoc via CLI</p>
</div></div><div id="cli_run_body" class="panel-collapse collapse"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/crojsdoc/blob/master//src/cli.coffee#L149">/src/cli.coffee:149</a>)</span></div><pre class="sourcecode prettyprint .linenums:149">exports.run = -&gt;
  options = _buildOptions()
  contents = _readSourceFiles options
  result = require('./collect') contents, options
  require('./render') result, options</pre></div></div></div></section></div></div></div><script src="http://code.jquery.com/jquery-1.11.0.min.js"></script><script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script><script src="../google-code-prettify/prettify.js"></script><script src="../script.js"></script><script src="../group-examples.js"></script><a href="https://github.com/croquiscom/crojsdoc"><img src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png" alt="Fork me on GitHub" class="github-ribbon"></a></body></html>